<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="business">

<!-- :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: INCLUDE ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::  -->

<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::  QUERY  ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::  -->

	<!-- 첫번째 업무 코드 조회 selectFirstItem -->
	<select id="selectFirstItem" parameterType="map" resultType="lowerMap">
		/* Download 조회 selectFirstItem */
		select 
			download_ip
		from download_ip
		where rownum = 1
		order by download_ip asc
	</select>
	
	<!-- 업무 코드 목록 selectList -->
	<select id="selectList" parameterType="map" resultType="lowerMap">
		/* 업무 코드 목록 selectList */
		select
			download_ip
		from download_ip
		where 1=1
		order by download_ip asc
	</select>
	
<!-- :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: INSERT :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::  -->
	
	<!-- 업무 코드 등록 insertCode -->
	<update id="insertCode" parameterType="map">
		insert into download_ip	/* 업무 코드 등록 insertCode */
		(
			 download_ip
		)
		select
			lpad(nvl(max(to_number(business_code)), 0) + 1, 2, '0') as business_code
			,#{business_name}
			, #{use_yn}
		from tbl_business
	</update>
	
<!-- :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: UPDATE :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::  -->
	
	<!-- 업무 코드 업데이트 updateCode -->
	<update id="updateCode" parameterType="map">
		/* 업무 코드 업데이트 updateCode */
		update download_ip
			set business_name = #{business_name}
		where business_code = #{business_code}
	</update>

<!-- :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: DELETE :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::  -->
	
	<!-- 업무 코드 삭제 (하위 코드가 없는 경우만 삭제됨) deleteCode -->
	<delete id="deleteCode" parameterType="string">
		/* 업무 코드 삭제 deleteCode */
		delete from tbl_business 
		where business_code = #{business_code}
	</delete>
</mapper>